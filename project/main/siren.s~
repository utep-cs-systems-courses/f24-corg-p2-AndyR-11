	.arch msp430g2553
	.p2align 1,0
	.text

	.global update_siren_frequency
	.bss
	.comm siren_frequency, 2 ; Reserve 2 bytes for siren_frequency
	.comm siren_direction, 2 ; Reserve 2 bytes for siren_direction

	;;  Function: update_siren_frequency
	;;  Description: Updates siren_frequency to simulate a siren sound.
update_siren_frequency:
	;;  Load siren_frequency into r12
	mov &siren_frequency, r12

	;;  Load siren_direction into r13
	mov &siren_direction, r13

	;;  Check if direction is increasing (1)
	cmp #1, r13
	jne decrease_tone

increase_tone:
	;;  Add 50 to siren_frequency
	add #50, r12
	;;  Check if siren_frequency >= 2000
	cmp #2000, r12
	jl update_and_return

	;;  Reverse direction: siren_direction = -1
	mov #-1, &siren_direction
	;;  Limit frequency to 2000
	mov #2000, r12
	jmp update_and_return

decrease_tone:
	;;  Subtract 50 from siren_frequency
	sub #50, r12
	;;  Check if siren_frequency <= 500
	cmp #500, r12
	jg update_and_return

	;;  Reverse direction: siren_direction = 1
	mov #1, &siren_direction
	;;  Limit frequency to 500
	mov #500, r12

update_and_return:
	;;  Store updated siren_frequency back to memory
	mov r12, &siren_frequency

	;;  Return the updated siren_frequency in r12
	    ret
